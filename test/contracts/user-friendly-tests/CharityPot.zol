// SPDX-License-Identifier: CC0

pragma solidity ^0.8.0;

import "./Escrow-imports/IERC20.sol";

contract CharityPot {

    secret uint256 private pot;
    IERC20 public erc20;
    address public admin;

    constructor (address _admin, address _erc20) {
        erc20 = IERC20(_erc20);
        admin = _admin;
    }

    function donate(uint256 donation) public {
        require(erc20.transferFrom(msg.sender, address(this), donation), "ERC20 transfer failed");
        unknown pot += donation;
    }

    function withdraw(uint256 withdrawal) public {
        require(msg.sender == admin);
        pot -= withdrawal;
        require(erc20.transfer(msg.sender, withdrawal),"ERC20 transfer failed");
    }


    /*

    Copy this into donate.mjs in order to mint NUM erc20 tokens: 
    
    const erc20 = await getContractInstance("ERC20");
        // mint tokens to the contract
		console.log("address minting to", config.web3.options.defaultAccount);
        await erc20.methods
            .mint(config.web3.options.defaultAccount, NUM)
            .send({ from: config.web3.options.defaultAccount });

			await erc20.methods
            .approve(this.contractAddr, NUM)
            .send({ from: config.web3.options.defaultAccount });*/
}
